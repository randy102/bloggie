@page
@model Bloggie.Pages.ListCategoryModel

@{
  Layout = "_AdminLayout";
}

@section Scripts {
  <script>
    function handleDelete(form) {
      bootbox.confirm({
        title: "Delete category?",
        centerVertical: true,
        message: "Are you sure you want to delete this category?",
        buttons: {
          confirm: {
            label: '<i class="fas fa-trash mr-1"></i> Yes',
            className: 'btn-danger',
          },
          cancel: {
            label: 'Cancel',
          }
        },
        callback: function(result) {
          result && form.submit();
        }
      })
    }
  </script>
}


<div class="container">
  <div class="mb-3">
    <div class="d-inline-block display-4 mr-3">Categories</div>
    <a class="btn btn-success btn-sm align-text-bottom ml-auto" href="/Admin/Categories/Create">
        <i class="fas fa-plus"></i>
        Create Category
    </a>
  </div>
  
  <div class="bloggie-datatable">
    <table class="table">
      <thead>
        <tr>
          <th><div>Category</div></th>
          <th><div>Edit</div></th>
          <th><div>Delete</div></th>
        </tr>
      </thead>
  
      <tbody>
        @foreach (var category in Model.Categories) {
          <tr>
            <td>@category.Name</td>
            
            <td>
              <a class="btn btn-round btn-primary btn-sm" href="/Admin/Categories/Update?id=@category.Id">
                <i class="fas fa-pen"></i>
              </a>
            </td>
  
            <td>
              <form id="delete-category" method="POST" asp-page-handler="Delete">
                <input type="hidden" name="id" value="@category.Id">

                <button type="button" class="btn btn-round btn-danger btn-sm"
                  onclick="handleDelete(this.form)"
                >
                  <i class="fas fa-trash"></i>
                </button>
              </form>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>
